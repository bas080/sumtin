Returns a integer between the range. The max value is never returned. Under the
hood it will retry getting a value if the value equals the max value
